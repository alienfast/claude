# PR Update Skill

Automatically generates or updates GitHub Pull Request titles and descriptions based on actual code changes in the final state.

## Activation

This skill activates automatically when you mention:
- "update the PR"
- "update PR description"
- "generate PR title and description"
- "write a PR summary"
- "create PR documentation"

## What It Does

1. **Analyzes the actual final state** of your code (not just commit history)
2. **Verifies features exist** in HEAD before documenting them
3. **Generates comprehensive PR descriptions** with proper structure
4. **Creates meaningful PR titles** following best practices
5. **Links to actual code files** for easy navigation

## Key Features

### Verification-First Approach
- Uses `git show HEAD:file` to confirm every feature exists
- Skips features that were added then removed during development
- Ensures PR descriptions match actual code state

### Structured Output
- Categorizes changes by impact (Infrastructure, Dev Experience, CI/CD, etc.)
- Includes file links, code snippets, and configuration examples
- Documents breaking changes and migration steps
- Lists actual tests that validate the changes

### Helper Scripts

**analyze-pr.sh** - Quick PR scope analysis
```bash
~/.claude/skills/pr-update/scripts/analyze-pr.sh
```

**verify-feature.sh** - Check if a feature exists in final state
```bash
~/.claude/skills/pr-update/scripts/verify-feature.sh path/to/file.ts "feature_name"
```

## Example Usage

### Automatic Activation
```
You: "update the pr"
Claude: [Runs analysis, verifies features, generates title and description, updates PR via gh CLI]
```

### What Gets Generated

**PR Title Examples:**
- "Enterprise Cloud SQL infrastructure with Advanced DR and staging environment"
- "Add GraphQL subscription support with real-time updates"
- "Fix memory leak in WebSocket connection handling"

**PR Description Structure:**
- Summary (1-2 sentences)
- Major Categories (Infrastructure, Developer Experience, CI/CD, etc.)
- Breaking Changes (with migration steps)
- Dependencies (verified in package.json)
- Testing (actual tests that pass)
- Cost Impact (if applicable)

## Quality Guarantees

Every PR description generated by this skill:
- ✅ Documents only features present in final code
- ✅ Links to actual files (clickable from GitHub)
- ✅ Includes code snippets from real files
- ✅ Lists actual tests that currently pass
- ✅ Marks breaking changes clearly
- ✅ Uses consistent formatting

## Files

- `SKILL.md` - Main skill instructions and workflow
- `scripts/analyze-pr.sh` - PR scope analysis helper
- `scripts/verify-feature.sh` - Feature verification helper
- `README.md` - This file
